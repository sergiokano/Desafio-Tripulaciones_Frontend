"use strict";(self.webpackChunkfrontend_tripulaciones=self.webpackChunkfrontend_tripulaciones||[]).push([[8423],{79347:function(e,t,r){r.d(t,{e:function(){return s}});var n,a,i,u={exports:{}};n=u,a=function(){function e(e,r,a){a=a||2;var i,u,s,l,c,f,p,h=r&&r.length,v=h?r[0]*a:e.length,x=t(e,0,v,a,!0),y=[];if(!x||x.next===x.prev)return y;if(h&&(x=o(e,r,x,a)),e.length>80*a){i=s=e[0],u=l=e[1];for(var d=a;d<v;d+=a)(c=e[d])<i&&(i=c),(f=e[d+1])<u&&(u=f),c>s&&(s=c),f>l&&(l=f);p=0!==(p=Math.max(s-i,l-u))?1/p:0}return n(x,y,a,i,u,p),y}function t(e,t,r,n,a){var i,u;if(a===T(e,t,r,n)>0)for(i=t;i<r;i+=n)u=S(i,e[i],e[i+1],u);else for(i=r-n;i>=t;i-=n)u=S(i,e[i],e[i+1],u);if(u&&g(u,u.next)){var s=u.next;M(u),u=s}return u}function r(e,t){if(!e)return e;t||(t=e);var r,n=e;do{if(r=!1,n.steiner||!g(n,n.next)&&0!==m(n.prev,n,n.next))n=n.next;else{var a=n.prev;if(M(n),(n=t=a)===n.next)break;r=!0}}while(r||n!==t);return t}function n(e,t,o,l,c,f,p){if(e){!p&&f&&h(e,l,c,f);for(var v,x,y=e;e.prev!==e.next;)if(v=e.prev,x=e.next,f?i(e,l,c,f):a(e))t.push(v.i/o),t.push(e.i/o),t.push(x.i/o),M(e),e=x.next,y=x.next;else if((e=x)===y){p?1===p?n(e=u(r(e),t,o),t,o,l,c,f,2):2===p&&s(e,t,o,l,c,f):n(r(e),t,o,l,c,f,1);break}}}function a(e){var t=e.prev,r=e,n=e.next;if(m(t,r,n)>=0)return!1;for(var a=e.next.next;a!==e.prev;){if(y(t.x,t.y,r.x,r.y,n.x,n.y,a.x,a.y)&&m(a.prev,a,a.next)>=0)return!1;a=a.next}return!0}function i(e,t,r,n){var a=e.prev,i=e,u=e.next;if(m(a,i,u)>=0)return!1;for(var s=a.x<i.x?a.x<u.x?a.x:u.x:i.x<u.x?i.x:u.x,o=a.y<i.y?a.y<u.y?a.y:u.y:i.y<u.y?i.y:u.y,l=a.x>i.x?a.x>u.x?a.x:u.x:i.x>u.x?i.x:u.x,c=a.y>i.y?a.y>u.y?a.y:u.y:i.y>u.y?i.y:u.y,f=v(s,o,t,r,n),p=v(l,c,t,r,n),h=e.prevZ,x=e.nextZ;h&&h.z>=f&&x&&x.z<=p;){if(h!==e.prev&&h!==e.next&&y(a.x,a.y,i.x,i.y,u.x,u.y,h.x,h.y)&&m(h.prev,h,h.next)>=0)return!1;if(h=h.prevZ,x!==e.prev&&x!==e.next&&y(a.x,a.y,i.x,i.y,u.x,u.y,x.x,x.y)&&m(x.prev,x,x.next)>=0)return!1;x=x.nextZ}for(;h&&h.z>=f;){if(h!==e.prev&&h!==e.next&&y(a.x,a.y,i.x,i.y,u.x,u.y,h.x,h.y)&&m(h.prev,h,h.next)>=0)return!1;h=h.prevZ}for(;x&&x.z<=p;){if(x!==e.prev&&x!==e.next&&y(a.x,a.y,i.x,i.y,u.x,u.y,x.x,x.y)&&m(x.prev,x,x.next)>=0)return!1;x=x.nextZ}return!0}function u(e,t,n){var a=e;do{var i=a.prev,u=a.next.next;!g(i,u)&&b(i,a,a.next,u)&&Z(i,u)&&Z(u,i)&&(t.push(i.i/n),t.push(a.i/n),t.push(u.i/n),M(a),M(a.next),a=e=u),a=a.next}while(a!==e);return r(a)}function s(e,t,a,i,u,s){var o=e;do{for(var l=o.next.next;l!==o.prev;){if(o.i!==l.i&&d(o,l)){var c=w(o,l);return o=r(o,o.next),c=r(c,c.next),n(o,t,a,i,u,s),void n(c,t,a,i,u,s)}l=l.next}o=o.next}while(o!==e)}function o(e,n,a,i){var u,s,o,c=[];for(u=0,s=n.length;u<s;u++)(o=t(e,n[u]*i,u<s-1?n[u+1]*i:e.length,i,!1))===o.next&&(o.steiner=!0),c.push(x(o));for(c.sort(l),u=0;u<c.length;u++)a=r(a=f(c[u],a),a.next);return a}function l(e,t){return e.x-t.x}function c(e){if(e.next.prev===e)return e;for(var t=e;;){var r=t.next;if(r.prev===t||r===t||r===e)break;t=r}return t}function f(e,t){var n=function(e,t){var r,n=t,a=e.x,i=e.y,u=-1/0;do{if(i<=n.y&&i>=n.next.y&&n.next.y!==n.y){var s=n.x+(i-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(s<=a&&s>u){if(u=s,s===a){if(i===n.y)return n;if(i===n.next.y)return n.next}r=n.x<n.next.x?n:n.next}}n=n.next}while(n!==t);if(!r)return null;if(a===u)return r;var o,l=r,c=r.x,f=r.y,h=1/0;n=r;do{a>=n.x&&n.x>=c&&a!==n.x&&y(i<f?a:u,i,c,f,i<f?u:a,i,n.x,n.y)&&(o=Math.abs(i-n.y)/(a-n.x),Z(n,e)&&(o<h||o===h&&(n.x>r.x||n.x===r.x&&p(r,n)))&&(r=n,h=o)),n=n.next}while(n!==l);return r}(e,t);if(!n)return t;var a=w(n,e),i=r(n,n.next),u=c(a);return r(u,u.next),i=c(i),c(t===n?i:t)}function p(e,t){return m(e.prev,e,t.prev)<0&&m(t.next,e,e.next)<0}function h(e,t,r,n){var a=e;do{null===a.z&&(a.z=v(a.x,a.y,t,r,n)),a.prevZ=a.prev,a.nextZ=a.next,a=a.next}while(a!==e);a.prevZ.nextZ=null,a.prevZ=null,function(e){var t,r,n,a,i,u,s,o,l=1;do{for(r=e,e=null,i=null,u=0;r;){for(u++,n=r,s=0,t=0;t<l&&(s++,n=n.nextZ);t++);for(o=l;s>0||o>0&&n;)0!==s&&(0===o||!n||r.z<=n.z)?(a=r,r=r.nextZ,s--):(a=n,n=n.nextZ,o--),i?i.nextZ=a:e=a,a.prevZ=i,i=a;r=n}i.nextZ=null,l*=2}while(u>1)}(a)}function v(e,t,r,n,a){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*a)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*a)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function x(e){var t=e,r=e;do{(t.x<r.x||t.x===r.x&&t.y<r.y)&&(r=t),t=t.next}while(t!==e);return r}function y(e,t,r,n,a,i,u,s){return(a-u)*(t-s)-(e-u)*(i-s)>=0&&(e-u)*(n-s)-(r-u)*(t-s)>=0&&(r-u)*(i-s)-(a-u)*(n-s)>=0}function d(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var r=e;do{if(r.i!==e.i&&r.next.i!==e.i&&r.i!==t.i&&r.next.i!==t.i&&b(r,r.next,e,t))return!0;r=r.next}while(r!==e);return!1}(e,t)&&(Z(e,t)&&Z(t,e)&&function(e,t){var r=e,n=!1,a=(e.x+t.x)/2,i=(e.y+t.y)/2;do{r.y>i!=r.next.y>i&&r.next.y!==r.y&&a<(r.next.x-r.x)*(i-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next}while(r!==e);return n}(e,t)&&(m(e.prev,e,t.prev)||m(e,t.prev,t))||g(e,t)&&m(e.prev,e,e.next)>0&&m(t.prev,t,t.next)>0)}function m(e,t,r){return(t.y-e.y)*(r.x-t.x)-(t.x-e.x)*(r.y-t.y)}function g(e,t){return e.x===t.x&&e.y===t.y}function b(e,t,r,n){var a=_(m(e,t,r)),i=_(m(e,t,n)),u=_(m(r,n,e)),s=_(m(r,n,t));return a!==i&&u!==s||!(0!==a||!k(e,r,t))||!(0!==i||!k(e,n,t))||!(0!==u||!k(r,e,n))||!(0!==s||!k(r,t,n))}function k(e,t,r){return t.x<=Math.max(e.x,r.x)&&t.x>=Math.min(e.x,r.x)&&t.y<=Math.max(e.y,r.y)&&t.y>=Math.min(e.y,r.y)}function _(e){return e>0?1:e<0?-1:0}function Z(e,t){return m(e.prev,e,e.next)<0?m(e,t,e.next)>=0&&m(e,e.prev,t)>=0:m(e,t,e.prev)<0||m(e,e.next,t)<0}function w(e,t){var r=new I(e.i,e.x,e.y),n=new I(t.i,t.x,t.y),a=e.next,i=t.prev;return e.next=t,t.prev=e,r.next=a,a.prev=r,n.next=r,r.prev=n,i.next=n,n.prev=i,n}function S(e,t,r,n){var a=new I(e,t,r);return n?(a.next=n.next,a.prev=n,n.next.prev=a,n.next=a):(a.prev=a,a.next=a),a}function M(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function I(e,t,r){this.i=e,this.x=t,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function T(e,t,r,n){for(var a=0,i=t,u=r-n;i<r;i+=n)a+=(e[u]-e[i])*(e[i+1]+e[u+1]),u=i;return a}return e.deviation=function(e,t,r,n){var a=t&&t.length,i=a?t[0]*r:e.length,u=Math.abs(T(e,0,i,r));if(a)for(var s=0,o=t.length;s<o;s++){var l=t[s]*r,c=s<o-1?t[s+1]*r:e.length;u-=Math.abs(T(e,l,c,r))}var f=0;for(s=0;s<n.length;s+=3){var p=n[s]*r,h=n[s+1]*r,v=n[s+2]*r;f+=Math.abs((e[p]-e[v])*(e[h+1]-e[p+1])-(e[p]-e[h])*(e[v+1]-e[p+1]))}return 0===u&&0===f?0:Math.abs((f-u)/u)},e.flatten=function(e){for(var t=e[0][0].length,r={vertices:[],holes:[],dimensions:t},n=0,a=0;a<e.length;a++){for(var i=0;i<e[a].length;i++)for(var u=0;u<t;u++)r.vertices.push(e[a][i][u]);a>0&&(n+=e[a-1].length,r.holes.push(n))}return r},e},void 0!==(i=a())&&(n.exports=i);var s=u.exports},71277:function(e,t,r){function n(e){return e=e||globalThis.location.hostname,l.some((function(t){var r;return null!=(null===(r=e)||void 0===r?void 0:r.match(t))}))}function a(e,t){return e&&(t=t||globalThis.location.hostname)?null!=t.match(i)||null!=t.match(s)?e.replace("static.arcgis.com","staticdev.arcgis.com"):null!=t.match(u)||null!=t.match(o)?e.replace("static.arcgis.com","staticqa.arcgis.com"):e:e}r.d(t,{XO:function(){return n},pJ:function(){return a}});var i=/^devext.arcgis.com$/,u=/^qaext.arcgis.com$/,s=/^[\w-]*\.mapsdevext.arcgis.com$/,o=/^[\w-]*\.mapsqa.arcgis.com$/,l=[/^([\w-]*\.)?[\w-]*\.zrh-dev-local.esri.com$/,i,u,/^jsapps.esri.com$/,s,o]},13200:function(e,t,r){r.d(t,{k3:function(){return u},s5:function(){return i},vX:function(){return s}});Number.POSITIVE_INFINITY,Math.PI;var n=1/Math.LN2;function a(e,t){return(e%=t)>=0?e:e+t}function i(e){return a(.7111111111111111*e,256)}function u(e){return Math.log(e)*n}function s(e,t,r){return e>=t&&e<=r||e>=r&&e<=t}},81735:function(e,t,r){r.d(t,{Z:function(){return p}});var n=r(15671),a=r(43144),i=r(60136),u=r(29388),s=r(27366),o=r(41691),l=r(49861),c=(r(63780),r(25243),r(69912)),f=function(e){(0,i.Z)(r,e);var t=(0,u.Z)(r);function r(){return(0,n.Z)(this,r),t.apply(this,arguments)}return(0,a.Z)(r,[{key:"initialize",value:function(){}},{key:"destroy",value:function(){}},{key:"supportsTileUpdates",get:function(){return!1}},{key:"spatialReference",get:function(){var e=this.get("tileStore.tileScheme.spatialReference");return e&&e.toJSON()||null}}]),r}(o.r);(0,s._)([(0,l.Cb)({readOnly:!0})],f.prototype,"supportsTileUpdates",null),(0,s._)([(0,l.Cb)({constructOnly:!0})],f.prototype,"remoteClient",void 0),(0,s._)([(0,l.Cb)({constructOnly:!0})],f.prototype,"service",void 0),(0,s._)([(0,l.Cb)()],f.prototype,"spatialReference",null),(0,s._)([(0,l.Cb)({constructOnly:!0})],f.prototype,"tileInfo",void 0),(0,s._)([(0,l.Cb)({constructOnly:!0})],f.prototype,"tileStore",void 0);var p=f=(0,s._)([(0,c.j)("esri.views.2d.layers.features.processors.BaseProcessor")],f)},3561:function(e,t,r){r.r(t),r.d(t,{default:function(){return D}});var n=r(37762),a=r(74165),i=r(15861),u=r(15671),s=r(43144),o=r(60136),l=r(29388),c=r(27366),f=r(75746),p=(r(10064),r(93169),r(32718),r(92026)),h=r(66978),v=(r(25243),r(63780),r(69912)),x=r(48732),y=r(78952),d=r(84328),m=r(80613),g=r(72774),b=r(74017),k=r(61909),_=r(69813),Z=r(27301),w=r(81735),S=r(1413),M=function(){function e(t){(0,u.Z)(this,e),this._remoteClient=t,this._resourceMap=new Map,this._inFlightResourceMap=new Map,this.geometryEngine=null}return(0,s.Z)(e,[{key:"destroy",value:function(){}},{key:"fetchResource",value:function(){var e=(0,i.Z)((0,a.Z)().mark((function e(t,r){var n,i,u,s=this;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this._resourceMap,!(i=n.get(t))){e.next=3;break}return e.abrupt("return",i);case 3:if(!(u=this._inFlightResourceMap.get(t))){e.next=6;break}return e.abrupt("return",u);case 6:e.prev=6,u=this._remoteClient.invoke("tileRenderer.fetchResource",{url:t},(0,S.Z)({},r)),this._inFlightResourceMap.set(t,u),u.then((function(e){return s._inFlightResourceMap.delete(t),n.set(t,e),e})),e.next=13;break;case 10:return e.prev=10,e.t0=e.catch(6),e.abrupt("return",(0,h.D_)(e.t0)?null:{width:0,height:0});case 13:return e.abrupt("return",u);case 14:case"end":return e.stop()}}),e,this,[[6,10]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getResource",value:function(e){var t;return null!==(t=this._resourceMap.get(e))&&void 0!==t?t:null}}]),e}();function I(e,t){return(!e.minScale||e.minScale>=t)&&(!e.maxScale||e.maxScale<=t)}function T(e){var t=e.message,r={message:{data:{},tileKey:t.tileKey,tileKeyOrigin:t.tileKeyOrigin,version:t.version},transferList:new Array};for(var n in t.data){var a=t.data[n];if(r.message.data[n]=null,(0,p.pC)(a)){var i=a.stride,u=a.indices.slice(0),s=a.vertices.slice(0),o=a.records.slice(0),l={stride:i,indices:u,vertices:s,records:o,metrics:(0,p.yw)(a.metrics,(function(e){return e.slice(0)}))};r.transferList.push(u,s,o),r.message.data[n]=l}}return r}var C=function(e){(0,o.Z)(r,e);var t=(0,l.Z)(r);function r(){var e;return(0,u.Z)(this,r),(e=t.apply(this,arguments)).type="symbol",e._matchers={feature:null,aggregate:null},e._bufferData=new Map,e._bufferIds=new Map,e}return(0,s.Z)(r,[{key:"initialize",value:function(){this.handles.add([this.tileStore.on("update",this.onTileUpdate.bind(this))]),this._resourceManagerProxy=new M(this.remoteClient)}},{key:"destroy",value:function(){this._resourceManagerProxy.destroy()}},{key:"supportsTileUpdates",get:function(){return!0}},{key:"forEachBufferId",value:function(e){this._bufferIds.forEach((function(t){t.forEach(e)}))}},{key:"update",value:function(){var e=(0,i.Z)((0,a.Z)().mark((function e(t,r){var n,i;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("symbol"===(n=r.schema.processors[0]).type){e.next=3;break}return e.abrupt("return");case 3:i=(0,x.Hg)(this._schema,n),((0,x.uD)(i,"mesh")||(0,x.uD)(i,"target"))&&(t.mesh=!0,t.why.mesh.push("Symbology changed"),this._schema=n,this._factory=this._createFactory(n),this._factory.update(n,this.tileStore.tileScheme.tileInfo));case 5:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"onTileMessage",value:function(e,t,r,n){return(0,h.k_)(n),this._onTileData(e,t,r,n)}},{key:"onTileClear",value:function(e){return this._bufferData.delete(e.key.id),this._bufferIds.delete(e.key.id),this.remoteClient.invoke("tileRenderer.onTileData",{tileKey:e.id,data:{clear:!0}})}},{key:"onTileError",value:function(e,t,r){var n=r.signal,a={tileKey:e.id,error:t};return this.remoteClient.invoke("tileRenderer.onTileError",a,{signal:n})}},{key:"onTileUpdate",value:function(e){var t,r=this,a=(0,n.Z)(e.removed);try{for(a.s();!(t=a.n()).done;){var i=t.value;this._bufferData.has(i.key.id)&&this._bufferData.delete(i.key.id),this._bufferIds.has(i.key.id)&&this._bufferIds.delete(i.key.id)}}catch(l){a.e(l)}finally{a.f()}var u,s=(0,n.Z)(e.added);try{var o=function(){var e=u.value;r._bufferData.forEach((function(t){var a,i=(0,n.Z)(t);try{for(i.s();!(a=i.n()).done;){var u=a.value;u.message.tileKey===e.id&&r._updateTileMesh("append",e,T(u),[],!1,!1,null)}}catch(l){i.e(l)}finally{i.f()}}))};for(s.s();!(u=s.n()).done;)o()}catch(l){s.e(l)}finally{s.f()}}},{key:"_addBufferData",value:function(e,t){this._bufferData.has(e)||this._bufferData.set(e,[]),this._bufferData.get(e).push(T(t))}},{key:"_createFactory",value:function(e){var t=this,r=this.service,n=r.geometryType,a=r.objectIdField,i={geometryType:n,fields:r.fields,spatialReference:y.Z.fromJSON(this.spatialReference)},u=new k.Wr((function(e,r){return t.remoteClient.invoke("tileRenderer.getMaterialItems",e,r)}),this.tileStore.tileScheme.tileInfo),s=e.mesh,o=s.matcher,l=s.aggregateMatcher;return this._store=u,this._matchers.feature=(0,_.fL)(o,u,i,this._resourceManagerProxy),this._matchers.aggregate=(0,p.yw)(l,(function(e){return(0,_.fL)(e,u,i,t._resourceManagerProxy)})),new b.j(n,a,u)}},{key:"_onTileData",value:function(){var e=(0,i.Z)((0,a.Z)().mark((function e(t,r,i,u){var s,o,l,c,f,v,x,y,d,m,g,b,k,_,Z,w,S,M,I,T,C,D,K,R=this;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((0,h.k_)(u),s=r.type,o=r.addOrUpdate,l=r.remove,c=r.clear,f=r.end,v=!!this._schema.mesh.sortKey,o){e.next=5;break}return x={type:s,addOrUpdate:null,remove:l,clear:c,end:f,sort:v},e.abrupt("return",this.remoteClient.invoke("tileRenderer.onTileData",{tileKey:t.id,data:x},u));case 5:return y=this._processFeatures(t,o,i,u,r.status.version),e.prev=6,e.next=9,y;case 9:if(d=e.sent,!(0,p.Wi)(d)){e.next=13;break}return m={type:s,addOrUpdate:null,remove:l,clear:c,end:f,sort:v},e.abrupt("return",this.remoteClient.invoke("tileRenderer.onTileData",{tileKey:t.id,data:m},u));case 13:g=[],b=(0,n.Z)(d),e.prev=15,b.s();case 17:if((k=b.n()).done){e.next=41;break}if(_=k.value,Z=!1,w=_.message.bufferIds,S=t.key.id,M=_.message.tileKey,S===M||!(0,p.pC)(w)){e.next=38;break}if(this.tileStore.get(M)){e.next=25;break}return this._addBufferData(S,_),g.push(_),e.abrupt("continue",39);case 25:(I=this._bufferIds.get(M))||(I=new Set,this._bufferIds.set(M,I)),T=Array.from(w),C=0,D=T;case 29:if(!(C<D.length)){e.next=38;break}if(K=D[C],!I.has(K)){e.next=34;break}return Z=!0,e.abrupt("break",38);case 34:I.add(K);case 35:C++,e.next=29;break;case 38:Z||(this._addBufferData(S,_),g.push(_));case 39:e.next=17;break;case 41:e.next=46;break;case 43:e.prev=43,e.t0=e.catch(15),b.e(e.t0);case 46:return e.prev=46,b.f(),e.finish(46);case 49:return e.next=51,Promise.all(g.map((function(e){var n=t.key.id===e.message.tileKey,a=n?r.remove:[],i=n&&r.end;return R._updateTileMesh(s,t,e,a,i,r.clear,u.signal)})));case 51:e.next=56;break;case 53:e.prev=53,e.t1=e.catch(6),this._handleError(t,e.t1,u);case 56:case"end":return e.stop()}}),e,this,[[6,53],[15,43,46,49]])})));return function(t,r,n,a){return e.apply(this,arguments)}}()},{key:"_updateTileMesh",value:function(){var e=(0,i.Z)((0,a.Z)().mark((function e(t,r,n,i,u,s,o){var l,c,f,v,x,y,d;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=t,c=n.message.tileKey,f=!!this._schema.mesh.sortKey,c!==r.key.id&&(u=!1),v=(0,p.yw)(n,(function(e){return e.message})),x=(0,p.yw)(n,(function(e){return e.transferList}))||[],y={type:l,addOrUpdate:v,remove:i,clear:s,end:u,sort:f},d={transferList:(0,p.Wg)(x)||[],signal:o},e.abrupt("return",((0,h.k_)(d),this.remoteClient.invoke("tileRenderer.onTileData",{tileKey:c,data:y},d)));case 4:case"end":return e.stop()}}),e,this)})));return function(t,r,n,a,i,u,s){return e.apply(this,arguments)}}()},{key:"_processFeatures",value:function(){var e=(0,i.Z)((0,a.Z)().mark((function e(t,r,n,i,u){var s,o,l,c,f,v;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(0,p.Wi)(r)&&r.hasFeatures){e.next=2;break}return e.abrupt("return",null);case 2:return s={transform:t.transform,hasZ:!1,hasM:!1},o=this._factory,l={viewingMode:"",scale:t.scale},e.next=7,this._matchers.feature;case 7:return c=e.sent,e.next=10,this._matchers.aggregate;case 10:return f=e.sent,(0,h.k_)(i),v=this._getLabelInfos(t,r),e.next=15,o.analyze(r.getCursor(),this._resourceManagerProxy,c,f,s,l);case 15:return(0,h.k_)(i),e.abrupt("return",this._writeFeatureSet(t,r,s,v,o,n,u));case 17:case"end":return e.stop()}}),e,this)})));return function(t,r,n,a,i){return e.apply(this,arguments)}}()},{key:"_writeFeatureSet",value:function(e,t,r,n,a,i,u){for(var s=t.getSize(),o=this._schema.mesh.matcher.symbologyType,l=new g._(e.key.id,{features:s,records:s,metrics:0},o,i,o!==m.mD.HEATMAP,u),c={viewingMode:"",scale:e.scale},f=t.getCursor();f.next();)try{var h=f.getDisplayId(),v=(0,p.pC)(n)?n.get(h):null;a.writeCursor(l,f,r,c,e.level,v,this._resourceManagerProxy)}catch(y){}var x=e.tileInfoView.tileInfo.isWrappable;return l.serialize(x)}},{key:"_handleError",value:function(e,t,r){if(!(0,h.D_)(t)){var n={tileKey:e.id,error:t.message};return this.remoteClient.invoke("tileRenderer.onTileError",n,{signal:r.signal})}}},{key:"_getLabelingSchemaForScale",value:function(e){var t=this._schema.mesh.labels;if((0,p.Wi)(t))return null;if("subtype"===t.type){var r={type:"subtype",classes:{}},n=!1;for(var a in t.classes){var i=t.classes[a].filter((function(t){return I(t,e.scale)}));n=n||!!i.length,r.classes[a]=i}return n?r:null}var u=t.classes.filter((function(t){return I(t,e.scale)}));return u.length?{type:"simple",classes:u}:null}},{key:"_getLabels",value:function(e,t){if("subtype"===t.type){var r,n=this.service.subtypeField,a=(0,p.s3)(n,"Expected to find subtype Field"),i=e.readAttribute(a);return null==i?[]:null!==(r=t.classes[i])&&void 0!==r?r:[]}return t.classes}},{key:"_getLabelInfos",value:function(e,t){var r=this,a=this._getLabelingSchemaForScale(e);if((0,p.Wi)(a))return null;for(var i=new Map,u=t.getCursor(),s=function(){var e,t=u.getDisplayId(),s=[],o=(0,d.nE)(t),l=o&&1!==u.readAttribute("cluster_count")?"aggregate":"feature",c=r._getLabels(u,a),p=(0,n.Z)(c);try{var h=function(){var n=e.value;if(n.target!==l)return"continue";var a=u.getStorage(),i=o&&"feature"===l?a.getComputedStringAtIndex(u.readAttribute("referenceId"),n.fieldIndex):a.getComputedStringAtIndex(t,n.fieldIndex);if(!i)return"continue";var c=(0,f.E)(i.toString()),p=c[0],h=c[1];r._store.getMosaicItem(n.symbol,(0,Z._)(p)).then((function(e){s[n.index]={glyphs:e.glyphMosaicItems,rtl:h,index:n.index}}))};for(p.s();!(e=p.n()).done;)h()}catch(v){p.e(v)}finally{p.f()}i.set(t,s)};u.next();)s();return i}}]),r}(w.Z),D=C=(0,c._)([(0,v.j)("esri.views.2d.layers.features.processors.SymbolProcessor")],C)},98125:function(e,t,r){r.d(t,{xS:function(){return C},B3:function(){return T}});var n=r(74165),a=r(15861),i=r(98991),u=r(37762),s=r(15671),o=r(43144),l=r(80613),c=r(54815),f={marker:l.LW.MARKER,fill:l.LW.FILL,line:l.LW.LINE,text:l.LW.TEXT},p=function(){function e(t,r,n,a){(0,s.Z)(this,e);var i={minScale:null===r||void 0===r?void 0:r.minScale,maxScale:null===r||void 0===r?void 0:r.maxScale},o=function(e){return e.minScale||e.maxScale?e.minScale+"-"+e.maxScale:""}(i);this.layers=t,this.data=r,this.hash=this._createHash()+o,this.rendererKey=n;var p,h={isOutline:!1,placement:null,symbologyType:l.mD.DEFAULT,vvFlags:n},v=(0,u.Z)(t);try{for(v.s();!(p=v.n()).done;){var x=p.value,y=f[x.type];h.isOutline="line"===x.type&&x.isOutline,x.materialKey=(0,c.jj)(y,h),x.maxVVSize=a,x.scaleInfo=i,x.templateHash+=o}}catch(d){v.e(d)}finally{v.f()}}return(0,o.Z)(e,[{key:"type",get:function(){return"expanded-cim"}},{key:"_createHash",value:function(){var e,t="",r=(0,u.Z)(this.layers);try{for(r.s();!(e=r.n()).done;){t+=e.value.templateHash}}catch(n){r.e(n)}finally{r.f()}return t}}]),e}();var h=r(71277),v=r(10064),x=r(92026),y=r(66978),d=r(35995),m=r(70032),g=r(53283),b=r(38048);function k(e,t,r){return _.apply(this,arguments)}function _(){return _=(0,a.Z)((0,n.Z)().mark((function e(t,r,a){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.name){e.next=2;break}throw new v.Z("style-symbol-reference-name-missing","Missing name in style symbol reference");case 2:if(!t.styleName||"Esri2DPointSymbolsStyle"!==t.styleName){e.next=4;break}return e.abrupt("return",Z(t,a));case 4:return e.prev=4,e.t0=S,e.next=8,(0,b.n2)(t,r,a);case 8:return e.t1=e.sent,e.t2=t.name,e.t3=r,e.t4=a,e.abrupt("return",(0,e.t0)(e.t1,e.t2,e.t3,e.t4));case 15:return e.prev=15,e.t5=e.catch(4),e.abrupt("return",((0,y.k_)(e.t5),null));case 18:case"end":return e.stop()}}),e,null,[[4,15]])}))),_.apply(this,arguments)}function Z(e,t){return w.apply(this,arguments)}function w(){return w=(0,a.Z)((0,n.Z)().mark((function e(t,r){var a,i;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=b.wm.replace(/\{SymbolName\}/gi,t.name),e.prev=1,e.next=4,(0,b.EJ)(a,r);case 4:return i=e.sent,e.abrupt("return",(0,b.KV)(i.data));case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",((0,y.k_)(e.t0),null));case 11:case"end":return e.stop()}}),e,null,[[1,8]])}))),w.apply(this,arguments)}function S(e,t,r,n){return M.apply(this,arguments)}function M(){return M=(0,a.Z)((0,n.Z)().mark((function e(t,r,a,i){var u,s,o,l,c;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u=t.data,s={portal:a&&(0,x.pC)(a.portal)?a.portal:m.Z.getDefault(),url:(0,d.mN)(t.baseUrl),origin:"portal-item"},o=u.items.find((function(e){return e.name===r}))){e.next=3;break}throw new v.Z("symbolstyleutils:symbol-name-not-found","The symbol name '".concat(r,"' could not be found"),{symbolName:r});case 3:return l=(0,g.f)((0,b.v9)(o,"cimRef"),s),(0,h.XO)()&&(l=(0,h.pJ)(l)),e.prev=5,e.next=8,(0,b.EJ)(l,i);case 8:return c=e.sent,e.abrupt("return",(0,b.KV)(c.data));case 12:return e.prev=12,e.t0=e.catch(5),e.abrupt("return",((0,y.k_)(e.t0),null));case 15:case"end":return e.stop()}}),e,null,[[5,12]])}))),M.apply(this,arguments)}var I=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t,r,a){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=p,e.next=3,(0,i.c)(t.data,r,a);case 3:return e.t1=e.sent,e.t2=t.data,e.t3=t.rendererKey,e.t4=t.maxVVSize,e.abrupt("return",new e.t0(e.t1,e.t2,e.t3,e.t4));case 8:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),T=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t,r,a,i){var u;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",null);case 2:if("cim"!==t.type){e.next=4;break}return e.abrupt("return",I(t,r,a));case 4:if("web-style"!==t.type){e.next=12;break}return e.next=7,k(t,null,i);case 7:return e.t0=e.sent,e.t1=t.rendererKey,e.t2=t.maxVVSize,u={type:"cim",data:e.t0,rendererKey:e.t1,maxVVSize:e.t2},e.abrupt("return",I(u,r,a));case 12:return e.abrupt("return",t);case 13:case"end":return e.stop()}}),e)})));return function(t,r,n,a){return e.apply(this,arguments)}}();function C(e){if(!e)return null;var t=e.type,r=e.cim,n=e.url,a={cim:r,type:t,mosaicHash:e.materialHash,url:n,size:null,dashTemplate:null,path:null,text:null,fontName:null,animatedSymbolProperties:null};switch(t){case"marker":a.size=e.size,a.path=e.path,a.animatedSymbolProperties=e.animatedSymbolProperties;break;case"line":a.dashTemplate=e.dashTemplate;break;case"text":a.text=e.text,a.fontName=e.fontName}return a}}}]);
//# sourceMappingURL=8423.a183ee1e.chunk.js.map